<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ä¸‡åœ£èŠ‚æš–è¯­è¯äº‘ ğŸ‘»</title>
  <style>
    :root {
      --bg: #1e1e2f;
      --primary: #ff7a00;
      --text: #fff;
    }
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Microsoft YaHei", sans-serif;
      background: var(--bg);
      color: var(--text);
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }
    /* å¼€åœºå¼¹çª— */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, .6);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }
    .modal {
      background: #2c2c3a;
      border-radius: 16px;
      width: min(320px, 90vw);
      padding: 24px;
      text-align: center;
      box-shadow: 0 8px 24px rgba(0, 0, 0, .4);
    }
    .titlebar {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 22px;
      font-weight: 800;
      margin-bottom: 16px;
    }
    .content {
      font-size: 16px;
      margin-bottom: 24px;
    }
    .btn {
      border: none;
      padding: 10px 32px;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: .25s;
      background: var(--primary);
      color: #fff;
    }
    .btn:hover {
      background: #ff973c;
    }
    /* æš–è¯­ç²’å­ */
    .particle {
      position: fixed;
      font-size: 18px;
      font-weight: 600;
      color: #fff;
      text-shadow: 0 0 3px #000;
      pointer-events: none;
      opacity: 0;
      animation: fadeInScale .5s forwards;
    }
    @keyframes fadeInScale {
      0% {
        transform: translate(-50%, -50%) scale(.5);
        opacity: 0;
      }
      100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
      }
    }
    /* éšè— canvasï¼Œåªç”¨å®ƒåšé®ç½©è®¡ç®— */
    #maskCanvas {
      display: none;
    }
  </style>
</head>

<body>
  <!-- å¼€åœº -->
  <div class="modal-backdrop" id="start-backdrop">
    <div class="modal">
      <div class="titlebar"><span>ğŸƒ</span><span>ä¸‡åœ£èŠ‚ç¤¼ç‰©</span></div>
      <div class="content">æ‚¨æœ‰ä¸€ä»½ä¸‡åœ£èŠ‚ç¤¼ç‰©ï¼Œç¡®å®šè¦æ‰“å¼€å—ï¼Ÿ</div>
      <div class="actions"><button class="btn" id="confirm-btn">ç¡®å®š</button></div>
    </div>
  </div>

  <!-- èƒŒæ™¯éŸ³ä¹ -->
  <audio id="bgMusic" preload loop>
    <source src="https://sf5-hl-cdn-tos.douyinstatic.com/obj/ies-music/7499771397531503370.mp3" type="audio/mpeg">
  </audio>

  <!-- é®ç½© canvas -->
  <canvas id="maskCanvas"></canvas>

  <script>
    /* ====== é…ç½® ====== */
    const CONFIG = {
      tips: [
        'ä¿æŒå¥½å¿ƒæƒ… ğŸ˜Š','å¤šå–æ°´å“¦~ ğŸ’§','ä»Šå¤©è¿‡å¾—å¼€å¿ƒå˜› ğŸŒˆ','åˆ«ç†¬å¤œ ğŸŒ™',
        'ä¿æŒå¾®ç¬‘ ğŸ˜Š','æœŸå¾…ä¸‹ä¸€æ¬¡è§é¢ ğŸ¤','æ¢¦æƒ³æˆçœŸ âœ¨','æ—©ç‚¹ä¼‘æ¯ ğŸ˜´',
        'å¥½å¥½çˆ±è‡ªå·± â¤ï¸','æ¯å¤©å¹¸ç¦æ»¡æ»¡ ğŸŒ»',
        'é˜³å…‰å¾ˆæš–ï¼Œä½ ä¹Ÿæ˜¯ ğŸŒ','é£å¾ˆç”œï¼Œå› ä¸ºä½ åœ¨ç¬‘ ğŸƒ','ä½ å€¼å¾—è¢«æ¸©æŸ”ä»¥å¾… ğŸŒ¸',
        'æ…¢æ…¢æ¥ï¼Œä¼šæ›´å¿« ğŸ¢','æ‰€æœ‰ç¾å¥½éƒ½å¦‚æœŸè€Œè‡³ ğŸ•Šï¸','ä»Šæ™šæ˜Ÿæ˜Ÿä¸ºä½ ç‚¹ç¯ âœ¨',
        'æŠŠçƒ¦æ¼è°ƒæˆé™éŸ³ ğŸ”‡','ä¸–ç•Œå¾ˆå¤§ï¼Œå¼€å¿ƒç¬¬ä¸€ ğŸŒ','ä½ æ¯”æ˜¨å¤©æ›´æ£’ ğŸ‘','å¿ƒæœ‰å…‰èŠ’ï¼Œå¿…æœ‰è¿œæ–¹ ğŸŒŸ',
        'ä»Šå¤©ä¹Ÿè¦åŠ æ²¹é¸­ ğŸ¦†','å°ç¡®å¹¸åœ¨æ’é˜Ÿç­‰ä½  ğŸ¬','æ„¿ä½ ç¡ä¸ªå¥½è§‰ ğŸŒ™','é£ä¼šå¸¦èµ°ä½ çš„ç–²æƒ« ğŸƒ',
        'ä½ ç¬‘èµ·æ¥çœŸå¥½çœ‹ ğŸ˜„','æŠŠéš¾è¿‡å…³åœ¨é—¨å¤– ğŸšª','åšè‡ªå·±çš„å¤ªé˜³ ğŸŒ','ä¸€åˆ‡éƒ½ä¼šå¥½èµ·æ¥ ğŸ’ª',
        'ä½ æ‹¥æœ‰æ”¹å˜ä¸–ç•Œçš„åŠ›é‡ ğŸŒ','åˆ«æ€¥ç€å¦å®šè‡ªå·± ğŸŒ±','æ¸©æŸ”æ˜¯å®è—ï¼Œä½ ä¹Ÿæ˜¯ ğŸ’',
        'ä¿æŒçƒ­çˆ±ï¼Œå¥”èµ´å±±æµ· ğŸŒŠ','æ‰€æœ‰ç­‰å¾…éƒ½æœ‰æ„ä¹‰ â³','ä½ é…å¾—ä¸Šæœ€å¥½çš„ä¸€åˆ‡ ğŸ†',
        'ä»Šå¤©é£å¾ˆæ¸©æŸ” ğŸƒ','ä½ é€†å…‰è€Œæ¥ï¼Œé…å¾—ä¸Šæ‰€æœ‰ç¾å¥½ ğŸŒ…','æŠŠæ—¥å­è¿‡æˆè¯— ğŸ“œ',
        'æ„¿ä½ è¢«å¾ˆå¤šäººåçˆ± ğŸ’Œ','å–œæ¬¢è‡ªå·±æ¯”å–œæ¬¢ä¸–ç•Œæ›´é‡è¦ â¤ï¸','ä½ åŠªåŠ›çš„æ ·å­çœŸå¥½çœ‹ ğŸŒº',
        'åˆ«å¿˜äº†æŠ¬å¤´çœ‹çœ‹æœˆäº® ğŸŒ•','ä½ æ°¸è¿œä¸ä¼šå­¤å• ğŸŒˆ','å¿«ä¹æ­£åœ¨åŠ è½½ä¸­ â³',
        'ç»™ç”Ÿæ´»æ¯”ä¸ªè€¶ âœŒï¸','ä½ å€¼å¾—ä¸€ä¸ªæ‹¥æŠ± ğŸ¤—','æ‰€æœ‰æ¸©æŸ”éƒ½ç»™ä½  ğŸŒ¸',
        'æ„¿ä½ ä¸‰å†¬æš– ğŸ§£','æ„¿ä½ æ˜¥ä¸å¯’ ğŸŒ¸','æ„¿ä½ å¤©é»‘æœ‰ç¯ï¼Œä¸‹é›¨æœ‰ä¼ â˜”',
        'ä½ æ¯”æ˜Ÿå…‰æ›´ç’€ç’¨ ğŸŒŸ','æŠŠä¸å¿«ç•™åœ¨æ˜¨å¤© ğŸ“…','ä½ æ­£åœ¨å‘å…‰ âœ¨',
        'ä¸–ç•Œå› ä½ æ›´ç¾ä¸½ ğŸŒ','ä¿æŒå°‘å¹´æ„Ÿ ğŸƒ','ä½ é…å¾—ä¸Šæ‰€æœ‰æŒå£° ğŸ‘',
        'æ„¿ä½ æ‰€é‡çš†è‰¯å–„ ğŸ•Šï¸','ä½ ç¬‘èµ·æ¥ä¸–ç•Œéƒ½äº®äº† ğŸŒ','ä»Šå¤©ä¹Ÿè¦å¼€å¿ƒå‘€ ğŸ˜Š',
        'ä½ æ‹¥æœ‰æœ€å¥½çš„æœªæ¥ ğŸš€','æ‰€æœ‰ç­‰å¾…éƒ½å€¼å¾— â³','ä½ æ¯”æƒ³è±¡ä¸­æ›´å¼ºå¤§ ğŸ’ª',
        'æŠŠå¹³å‡¡çš„æ—¥å­è¿‡æˆè¯— ğŸ“–','ä½ æ˜¯è‡ªå·±çš„å°å¤ªé˜³ ğŸŒ','æ„¿ä½ æ°¸è¿œçƒ­æ³ªç›ˆçœ¶ âœ¨',
        'é£ä¼šæ›¿ä½ æ‹¥æŠ±æˆ‘ ğŸƒ','ä½ å€¼å¾—è¢«ä¸–ç•Œæ¸©æŸ”ä»¥å¾… ğŸŒ','å¿«ä¹æ­£åœ¨è·¯ä¸Š ğŸšš',
        'ä½ é€†å…‰è€Œæ¥ï¼Œé…å¾—ä¸Šæ‰€æœ‰å¥½ ğŸŒ…','æ„¿ä½ ä¸€ç”Ÿæ¸…æ¾ˆæ˜æœ— ğŸŒŠ','ä½ åŠªåŠ›çš„æ ·å­æœ€ç¾ ğŸŒº',
        'æ‰€æœ‰ç¾å¥½ä¸æœŸè€Œé‡ ğŸŒˆ','ä½ æ°¸è¿œä¸ä¼šç‹¬è¡Œ ğŸ‘£','æŠŠçƒ¦æ¼ä¸¢è¿›æµ·é‡Œ ğŸŒŠ',
        'ä½ æ¯”æ˜¨å¤©æ›´å‹‡æ•¢ ğŸ¦','æ„¿ä½ ç¡ä¸ªå¥½è§‰ ğŸŒ™','ä½ å€¼å¾—æ‰€æœ‰æŒå£° ğŸ‘',
        'ä»Šå¤©ä¹Ÿè¦å…ƒæ°”æ»¡æ»¡ âš¡','ä½ æ‹¥æœ‰æ²»æ„ˆä¸–ç•Œçš„åŠ›é‡ ğŸ’Š','æ„¿ä½ æ‰€æ„¿ç»ˆèƒ½å®ç° ğŸ',
        'ä½ ç¬‘èµ·æ¥çœŸå¥½çœ‹ ğŸ˜„','ä½ é…å¾—ä¸Šæ‰€æœ‰ç¾å¥½ ğŸ†','æŠŠéš¾è¿‡å…³åœ¨æ˜¨å¤© ğŸšª',
        'ä½ æ­£åœ¨æ‚„æ‚„å‘å…‰ âœ¨','æ„¿ä½ è¢«æ¸©æŸ”ä»¥å¾… ğŸŒ¸','ä½ æ¯”æ˜Ÿå…‰æ›´è€€çœ¼ ğŸŒŸ',
        'æ‰€æœ‰ç­‰å¾…éƒ½æœ‰æ„ä¹‰ â³','ä½ å€¼å¾—è¢«åçˆ± ğŸ’Œ','æ„¿ä½ ä¸‰å†¬æš–ï¼Œæ˜¥ä¸å¯’ ğŸŒ¸',
        'ä½ æ°¸è¿œä¸ä¼šå­¤å• ğŸŒˆ','å¿«ä¹æ­£åœ¨åŠ è½½ â³','ä½ é€†å…‰è€Œæ¥ï¼Œè‡ªå¸¦å…‰èŠ’ ğŸŒ…',
        'ä½ æ‹¥æœ‰æœ€å¥½çš„æœªæ¥ ğŸš€','æŠŠæ—¥å­è¿‡æˆè¯— ğŸ“œ','ä½ æ¯”æƒ³è±¡ä¸­æ›´å¼ºå¤§ ğŸ’ª',
        'æ„¿ä½ ä¸€ç”Ÿæ¸…æ¾ˆæ˜æœ— ğŸŒŠ','ä½ åŠªåŠ›çš„æ ·å­çœŸå¥½çœ‹ ğŸŒº','æ‰€æœ‰ç¾å¥½å¦‚æœŸè€Œè‡³ ğŸ•Šï¸',
        'ä½ é…å¾—ä¸Šæ‰€æœ‰æŒå£° ğŸ‘','é£å¾ˆç”œï¼Œå› ä¸ºä½ åœ¨ç¬‘ ğŸƒ','ä½ å€¼å¾—è¢«ä¸–ç•Œæ¸©æŸ”ä»¥å¾… ğŸŒ',
        'ä»Šå¤©ä¹Ÿè¦åŠ æ²¹å‘€ ğŸ¦†','ä½ æ¯”æ˜¨å¤©æ›´æ£’ ğŸ‘','ä¿æŒçƒ­çˆ±ï¼Œå¥”èµ´å±±æµ· ğŸŒŠ',
        'ä½ æ°¸è¿œä¸ä¼šç‹¬è¡Œ ğŸ‘£','æŠŠä¸å¿«ç•™åœ¨æ˜¨å¤© ğŸ“…','ä½ æ­£åœ¨å‘å…‰å‘äº® âœ¨',
        'æ„¿ä½ ç¡ä¸ªå¥½è§‰ ğŸŒ™','ä½ æ‹¥æœ‰æ²»æ„ˆä¸–ç•Œçš„åŠ›é‡ ğŸ’Š','æ‰€æœ‰æ¸©æŸ”éƒ½ç»™ä½  ğŸŒ¸',
        'ä½ å€¼å¾—æ‰€æœ‰ç¾å¥½ ğŸ†','å¿«ä¹æ­£åœ¨è·¯ä¸Š ğŸšš','ä½ é€†å…‰è€Œæ¥ï¼Œé…å¾—ä¸Šæ‰€æœ‰ ğŸŒ…',
        'æ„¿ä½ è¢«å¾ˆå¤šäººåçˆ± ğŸ’Œ','ä½ æ¯”æ˜Ÿå…‰æ›´ç’€ç’¨ ğŸŒŸ','æŠŠå¹³å‡¡è¿‡æˆè¯— ğŸ“–',
        'ä½ åŠªåŠ›çš„æ ·å­æœ€ç¾ ğŸŒº','æ‰€æœ‰ç­‰å¾…éƒ½å€¼å¾— â³','ä½ é…å¾—ä¸Šæœ€å¥½çš„ä¸€åˆ‡ ğŸ',
        'ä»Šå¤©é£å¾ˆæ¸©æŸ” ğŸƒ','ä½ ç¬‘èµ·æ¥ä¸–ç•Œäº®äº† ğŸŒ','æ„¿ä½ æ°¸è¿œçƒ­æ³ªç›ˆçœ¶ âœ¨'
      ],
      ghostImg: 'ghost.png',   // â† æ”¾åŒç›®å½•çš„é€æ˜åº•é¬¼å½¢ PNG
      totalParticles: 200,     // æœ€ç»ˆç²’å­æ•°
      spawnInterval: 80,       // æ¯å¥é—´éš”ï¼ˆmsï¼‰
      finalWait: 3000          // å®Œæˆååœç•™æ—¶é•¿
    };

    /* ====== å·¥å…· ====== */
    const rand = (max, min = 0) => Math.floor(Math.random() * (max - min + 1)) + min;

    /* ====== DOM ====== */
    const backdrop = document.getElementById('start-backdrop');
    const music = document.getElementById('bgMusic');

    /* ====== ä¸»æµç¨‹ ====== */
    let ghostData = []; // ä¿å­˜é¬¼å½¢éé€æ˜åƒç´ åæ ‡

    // 1. åŠ è½½é¬¼å½¢é®ç½©
    function loadGhostMask() {
      const img = new Image();
      img.crossOrigin = 'anonymous';
      img.src = CONFIG.ghostImg;
      img.onload = () => {
        const canvas = document.getElementById('maskCanvas');
        const ctx = canvas.getContext('2d');
        const size = 200; // ç»Ÿä¸€å°ºå¯¸
        canvas.width = canvas.height = size;
        ctx.drawImage(img, 0, 0, size, size);
        const imgData = ctx.getImageData(0, 0, size, size).data;
        ghostData = []; // é‡ç½®
        for (let i = 0; i < imgData.length; i += 4) {
          const a = imgData[i + 3]; // alpha
          if (a > 128) { // éé€æ˜
            const x = (i / 4) % size;
            const y = Math.floor(i / 4 / size);
            ghostData.push([x, y]);
          }
        }
        if (ghostData.length === 0) ghostData = Array.from({ length: size * size }, (_, i) => [i % size, Math.floor(i / size)]); // å…œåº•
      };
      img.onerror = () => {
        alert('é¬¼å½¢å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œè¯·ç¡®è®¤ ghost.png å­˜åœ¨');
        // å…œåº•ç”¨æ–¹å½¢
        const size = 200;
        ghostData = Array.from({ length: size * size }, (_, i) => [i % size, Math.floor(i / size)]);
      };
    }

    // 2. ç‚¹å‡»å¼€å§‹
    document.getElementById('confirm-btn').addEventListener('click', () => {
      backdrop.style.display = 'none';
      music.play();
      spawnParticles();
    });

    // 3. ç”Ÿæˆç²’å­
    function spawnParticles() {
      let count = 0;
      const timer = setInterval(() => {
        createParticle();
        if (++count >= CONFIG.totalParticles) {
          clearInterval(timer);
          setTimeout(fadeAll, CONFIG.finalWait);
        }
      }, CONFIG.spawnInterval);
    }

    function createParticle() {
      const p = document.createElement('div');
      p.className = 'particle';
      p.textContent = CONFIG.tips[rand(CONFIG.tips.length - 1)];
      // éšæœºå–ä¸€ä¸ªé¬¼å½¢åƒç´ ç‚¹
      const [px, py] = ghostData[rand(ghostData.length - 1)];
      const x = (px / 200) * 100; // 200 æ˜¯ canvas å°ºå¯¸
      const y = (py / 200) * 100;
      p.style.left = x + 'vw';
      p.style.top = y + 'vh';
      document.body.appendChild(p);
    }

    // 4. æ·¡å‡º
    function fadeAll() {
      document.querySelectorAll('.particle').forEach(el => {
        el.style.transition = 'opacity .8s';
        el.style.opacity = '0';
      });
      setTimeout(() => {
        document.querySelectorAll('.particle').forEach(el => el.remove());
      }, 800);
    }

    /* ====== åˆå§‹åŒ– ====== */
    loadGhostMask();
  </script>
</body>
</html>